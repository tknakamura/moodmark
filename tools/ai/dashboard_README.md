# MOO:D MARK IDEA 商品推奨ダッシュボード

記事URL、ターゲットキーワード、ペルソナを入力して最適な商品を提案するWebダッシュボードです。

## 機能概要

### 入力項目
- **記事のURL**: 対象記事のURL
- **ターゲットキーワード**: カンマ区切りでキーワードを入力
- **ペルソナ**: ターゲットオーディエンスの選択
- **提案商品数**: 1-15件から選択

### 出力項目
- **商品名**: 推奨商品の名称
- **商品番号**: 商品ID
- **商品説明キャッチコピー**: 記事に最適化されたキャッチコピー
- **商品説明ボディコピー**: 記事に最適化された詳細説明
- **商品URL**: 商品ページへのリンク
- **提案の理由**: 推奨根拠の表示
- **信頼度スコア**: 推奨の信頼度（0-100%）
- **価格情報**: 商品価格

## セットアップ

### 1. 依存関係のインストール

```bash
cd tools/ai
pip install -r requirements.txt
```

### 2. ダッシュボードの起動

```bash
python product_dashboard.py
```

デフォルトでポート5001で起動します。

### 3. アクセス

ブラウザで以下のURLにアクセス：
```
http://localhost:5001
```

## 使用方法

### 基本的な使用手順

1. **記事URL入力**
   - 対象記事のURLを入力

2. **キーワード入力**
   - カンマ区切りでキーワードを入力
   - 例: `彼氏,誕生日プレゼント,男性ギフト`

3. **ペルソナ選択**
   - ドロップダウンからターゲットオーディエンスを選択

4. **提案商品数設定**
   - 1-15件から希望数を選択

5. **実行**
   - 「商品を提案する」ボタンをクリック

### サンプルデータの使用

「サンプルデータを読み込む」ボタンをクリックすると、テスト用のデータが自動入力されます。

## 推奨アルゴリズム

### マッチング要素
1. **キーワード類似度** (30%)
   - 記事キーワードと商品情報のTF-IDF類似度

2. **ペルソナマッチング** (20%)
   - ターゲットオーディエンスの適合性

3. **シーンマッチング** (20%)
   - 記事URLから推測されるシーンの適合性

4. **予算マッチング** (10%)
   - ペルソナに基づく予算範囲との適合性

5. **季節マッチング** (10%)
   - 現在の季節と商品の季節性

6. **人気度・CVR** (10%)
   - 商品の人気度とコンバージョン率

### コピー生成機能

#### キャッチコピー生成
- シーン別のテンプレートを使用
- ペルソナと価格を組み合わせた最適化

#### ボディコピー生成
- キーワードを活用した説明文
- ペルソナに特化したメリット提示
- 商品特徴の構造化された説明

## API仕様

### 推奨取得API

```http
POST /api/recommend
Content-Type: application/json

{
    "article_url": "https://example.com/article",
    "target_keywords": ["キーワード1", "キーワード2"],
    "persona": "20代女性",
    "num_recommendations": 5
}
```

### レスポンス例

```json
{
    "success": true,
    "recommendations": [
        {
            "product_name": "商品名",
            "product_id": "product_001",
            "catch_copy": "最適化されたキャッチコピー",
            "body_copy": "最適化された詳細説明",
            "product_url": "https://isetan.mistore.jp/moodmark/products/product_001",
            "recommendation_reasons": ["キーワードの高一致", "ペルソナの一致"],
            "match_score": 0.856,
            "confidence": 0.923,
            "price": 8000,
            "category": "ファッション"
        }
    ],
    "total_count": 5,
    "timestamp": "2024-01-15T10:30:00"
}
```

## カスタマイズ

### コピーテンプレートの変更

`product_dashboard.py`の`generate_catch_copy`と`generate_body_copy`関数を編集して、コピーの生成ロジックをカスタマイズできます。

### 推奨アルゴリズムの調整

`product_recommendation_engine.py`の設定で重み付けを変更できます：

```python
"matching_weights": {
    "keyword_similarity": 0.3,
    "persona_match": 0.2,
    "scene_match": 0.2,
    "budget_match": 0.1,
    "seasonal_match": 0.1,
    "popularity": 0.05,
    "conversion_rate": 0.05
}
```

## トラブルシューティング

### よくある問題

#### 1. 推奨結果が表示されない
- 入力データの形式を確認
- システム状況でエンジンの状態をチェック

#### 2. エラーが発生する
- ブラウザの開発者ツールでエラーログを確認
- サーバーログで詳細なエラー情報を確認

#### 3. パフォーマンスが遅い
- 提案商品数を減らす
- キーワード数を制限する

## 今後の拡張予定

1. **リアルタイム学習機能**
   - ユーザーフィードバックの蓄積
   - 推奨精度の継続改善

2. **高度なパーソナライゼーション**
   - ユーザー行動履歴の活用
   - セッション情報の考慮

3. **多言語対応**
   - 英語コンテンツへの対応
   - 多言語キーワードマッチング

4. **バッチ処理機能**
   - 複数記事の一括処理
   - CSV形式での結果出力

## ライセンス

このプロジェクトはMOO:D MARK IDEAプロジェクトの一部です。
