<!DOCTYPE html>
<html lang="ja">
<head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KLXFVW7G');</script>
    <!-- End Google Tag Manager -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>MOO:D MARK IDEA 商品推奨ダッシュボード</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/dashboard.css') }}" rel="stylesheet">
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KLXFVW7G"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div class="container-fluid">
        <!-- ヘッダー -->
        <header class="row bg-primary text-white py-3 mb-4">
            <div class="col-12">
                <h1 class="h2 mb-0">
                    <i class="fas fa-gift me-2"></i>
                    MOO:D MARK IDEA 商品推奨ダッシュボード
                </h1>
                <p class="mb-0 opacity-75">記事に最適な商品をAIが自動提案</p>
            </div>
        </header>

        <!-- メインコンテンツ -->
        <div class="row">
            <!-- 入力フォーム -->
            <div class="col-lg-4">
                <div class="card shadow-sm">
                    <div class="card-header bg-light">
                        <h5 class="card-title mb-0">
                            <i class="fas fa-edit me-2"></i>
                            入力情報
                        </h5>
                    </div>
                    <div class="card-body">
                        <form id="recommendationForm">
                            <!-- 記事URL -->
                            <div class="mb-3">
                                <label for="articleUrl" class="form-label">
                                    <i class="fas fa-link me-1"></i>
                                    記事のURL
                                </label>
                                <input type="url" class="form-control" id="articleUrl" 
                                       placeholder="https://example.com/article" required>
                                <div class="form-text">記事のURLを入力してください</div>
                            </div>

                            <!-- ターゲットキーワード -->
                            <div class="mb-3">
                                <label for="targetKeywords" class="form-label">
                                    <i class="fas fa-tags me-1"></i>
                                    ターゲットキーワード
                                </label>
                                <textarea class="form-control" id="targetKeywords" rows="3" 
                                          placeholder="彼氏,誕生日プレゼント,男性ギフト" required></textarea>
                                <div class="form-text">カンマ区切りでキーワードを入力してください</div>
                            </div>

                            <!-- ペルソナ -->
                            <div class="mb-3">
                                <label for="persona" class="form-label">
                                    <i class="fas fa-user me-1"></i>
                                    ペルソナ
                                </label>
                                <select class="form-select" id="persona" required>
                                    <option value="">ペルソナを選択してください</option>
                                    <option value="20代女性">20代女性</option>
                                    <option value="30代女性">30代女性</option>
                                    <option value="20代男性">20代男性</option>
                                    <option value="30代男性">30代男性</option>
                                    <option value="40代女性">40代女性</option>
                                    <option value="40代男性">40代男性</option>
                                    <option value="全年齢">全年齢</option>
                                    <option value="ファミリー">ファミリー</option>
                                </select>
                            </div>

                            <!-- 提案商品数 -->
                            <div class="mb-3">
                                <label for="numRecommendations" class="form-label">
                                    <i class="fas fa-list-ol me-1"></i>
                                    提案商品数
                                </label>
                                <select class="form-select" id="numRecommendations">
                                    <option value="3">3件</option>
                                    <option value="5" selected>5件</option>
                                    <option value="10">10件</option>
                                    <option value="15">15件</option>
                                </select>
                            </div>

                            <!-- 実行ボタン -->
                            <div class="d-grid">
                                <button type="submit" class="btn btn-primary btn-lg" id="submitBtn">
                                    <i class="fas fa-magic me-2"></i>
                                    商品を提案する
                                </button>
                            </div>

                            <!-- サンプルデータボタン -->
                            <div class="mt-3">
                                <button type="button" class="btn btn-outline-secondary btn-sm w-100" id="loadSampleBtn">
                                    <i class="fas fa-flask me-1"></i>
                                    サンプルデータを読み込む
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- システム状況 -->
                <div class="card shadow-sm mt-3">
                    <div class="card-header bg-light">
                        <h6 class="card-title mb-0">
                            <i class="fas fa-info-circle me-2"></i>
                            システム状況
                        </h6>
                    </div>
                    <div class="card-body">
                        <div id="systemStatus">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <span>推奨エンジン</span>
                                <span class="badge bg-success" id="engineStatus">正常</span>
                            </div>
                            <div class="d-flex justify-content-between align-items-center">
                                <span>データ処理</span>
                                <span class="badge bg-success" id="dataStatus">正常</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 推奨結果 -->
            <div class="col-lg-8">
                <div class="card shadow-sm">
                    <div class="card-header bg-light d-flex justify-content-between align-items-center">
                        <h5 class="card-title mb-0">
                            <i class="fas fa-star me-2"></i>
                            推奨商品
                        </h5>
                        <span class="badge bg-primary" id="resultCount" style="display: none;">0件</span>
                    </div>
                    <div class="card-body">
                        <!-- ローディング -->
                        <div id="loadingArea" class="text-center py-5" style="display: none;">
                            <div class="spinner-border text-primary mb-3" role="status">
                                <span class="visually-hidden">読み込み中...</span>
                            </div>
                            <p class="text-muted">商品を分析中...</p>
                        </div>

                        <!-- エラーメッセージ -->
                        <div id="errorArea" class="alert alert-danger" style="display: none;">
                            <i class="fas fa-exclamation-triangle me-2"></i>
                            <span id="errorMessage"></span>
                        </div>

                        <!-- 推奨結果リスト -->
                        <div id="recommendationsArea">
                            <div class="text-center text-muted py-5">
                                <i class="fas fa-gift fa-3x mb-3 opacity-25"></i>
                                <p>入力情報を入力して「商品を提案する」ボタンをクリックしてください</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- フッター -->
        <footer class="row mt-5 py-3 bg-light">
            <div class="col-12 text-center text-muted">
                <small>&copy; 2024 MOO:D MARK IDEA 商品推奨システム</small>
            </div>
        </footer>
    </div>

    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>
</html>
